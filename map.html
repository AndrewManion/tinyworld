<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Map</title>

  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

  <style>
    html,body { height:100%; margin:0; }
    #map { height:100vh; width:100%; }
    .leaflet-tooltip.my-tooltip {
      background: rgba(0,0,0,0.85);
      color:#fff;
      border-radius:4px;
      padding:4px 8px;
      font-size:13px;
    }
    /* optional: make markers slightly pop on hover */
    .leaflet-marker-icon:hover { transform: translateY(-4px); transition: transform 120ms; }
  </style>
</head>

<header class="bg-white shadow-sm sticky top-0 z-50">
  <div id="header-placeholder"></div>
</header>

<script>
  fetch("header.html")
    .then(r => r.text())
    .then(data => document.getElementById("header-placeholder").innerHTML = data);
</script>

<body>

<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
/* --- Colors (you can add any valid CSS color: names, hex, rgb) --- */
const COLORS = ["#e74c3c","#e67e22","#f1c40f","#27ae60","#3498db","#8e44ad","#7f8c8d","crimson","teal","gold"];

/* --- create an SVG marker (teardrop + white inner circle) and return as data URL --- */
function svgMarkerDataUrl(color, size=46) {
  // size: pixel height of the SVG canvas (icon will be scaled by iconSize below)
  const radius = size * 0.22;           // inner white circle radius
  const cx = size/2;                    // center x
  const cy = size * 0.40;               // center y for circle
  const path = `
    M ${cx} ${size} 
    C ${cx-((size*0.15))} ${size*0.80}, ${cx-((size*0.30))} ${size*0.58}, ${cx} ${size*0.24}
    C ${cx+((size*0.30))} ${size*0.58}, ${cx+((size*0.15))} ${size*0.80}, ${cx} ${size}
    Z
  `;
  const svg = `
    <svg xmlns='http://www.w3.org/2000/svg' width='${size}' height='${size}' viewBox='0 0 ${size} ${size}'>
      <defs>
        <filter id="s" x="-50%" y="-50%" width="200%" height="200%">
          <feDropShadow dx="0" dy="1" stdDeviation="1.2" flood-color="#000" flood-opacity="0.35"/>
        </filter>
      </defs>
      <path d="${path}" fill="${color}" stroke="#000" stroke-opacity="0.12" stroke-width="${Math.max(0.8,size*0.02)}" filter="url(#s)"/>
      
    </svg>
  `;
  return "data:image/svg+xml;utf8," + encodeURIComponent(svg);
}

/* --- build Leaflet icon from SVG data URL --- */
function coloredIcon(color) {
  const iconSize = [36, 46];   // width, height in px
  const iconAnchor = [18, 45]; // point in icon which corresponds to marker's latlng
  return L.icon({
    iconUrl: svgMarkerDataUrl(color, 64), // larger SVG for crispness
    iconSize: iconSize,
    iconAnchor: iconAnchor,
    popupAnchor: [0, -40],
    tooltipAnchor: [0, -36],
    className: '' // keep default
  });
}

/* --- random color helper --- */
function randomColor() {
  // choose either from COLORS array or create a random HSL if you want more variety
  const pick = COLORS[Math.floor(Math.random() * COLORS.length)];
  return pick;
}

/* --- initialize map --- */
const map = L.map('map');
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  maxZoom: 19,
  minZoom: 2,
  attribution: '&copy; OpenStreetMap contributors',
  noWrap: true
}).addTo(map);

/* --- your locations (unchanged) --- */
const locations = [
  ["Buenos Aires, Argentina", -34.6037, -58.3816],
  ["El Chalten, Argentina", -49.3286, -72.8869],
  ["Valparaiso, Chile", -33.0472, -71.6127],
  ["Medellin, Colombia", 6.2442, -75.5812],
  ["New York, New York", 40.7128, -74.0060],
  ["London, England", 51.5074, -0.1278],
  ["Cardiff, Wales", 51.4816, -3.1791],
  ["Caen, France", 49.1829, -0.3707],
  ["Paris, France", 48.8566, 2.3522],
  ["Feldkirch, Austria", 47.2333, 9.6],
  ["St. Anton, Austria", 47.1286, 10.2641],
  ["Innsbruck, Austria", 47.2692, 11.4041],
  ["San Cassiano, Italy", 46.5775, 11.9333],
  ["Kitzbuhel, Austria", 47.4476, 12.3926],
  ["Salzburg, Austria", 47.8095, 13.0550],
  ["Vienna, Austria", 48.2082, 16.3738],
  ["Munich, Germany", 48.1351, 11.5820],
  ["St. Moritz, Switzerland", 46.4970, 9.8418],
  ["Cevio, Switzerland", 46.3167, 8.6000],
  ["Bellinzona, Switzerland", 46.1930, 9.0221],
  ["Como, Italy", 45.8080, 9.0852],
  ["Milan, Italy", 45.4642, 9.1900],
  ["Zermatt, Switzerland", 46.0207, 7.7491],
  ["Geneva, Switzerland", 46.2044, 6.1432],
  ["Chamonix, France", 45.9237, 6.8694],
  ["Nice, France", 43.7102, 7.2620],
  ["Cannes, France", 43.5528, 7.0174],
  ["Agadir, Morocco", 30.4278, -9.5981],
  ["Taghazout, Morocco", 30.5458, -9.7084],
  ["Marrakech, Morocco", 31.6295, -7.9811],
  ["Imsouane, Morocco", 30.8390, -9.8070],
  ["Sidi Kaouki, Morocco", 31.3446, -9.7997],
  ["Imlil, Morocco", 31.1172, -7.9183],
  ["Zagora, Morocco", 30.3323, -5.8377],
  ["Tagounite, Morocco", 29.7228, -5.6093],
  ["Tinghir, Morocco", 31.5147, -5.5328],
  ["Meknès, Morocco", 33.8950, -5.5547],
  ["Fès, Morocco", 34.0331, -5.0003],
  ["Chefchaouen, Morocco", 35.1714, -5.2696],
  ["Tanger, Morocco", 35.7595, -5.8339],
  ["Algeciras, Spain", 36.1408, -5.4562],
  ["Tarifa, Spain", 36.0140, -5.6049],
  ["Sevilla, Spain", 37.3891, -5.9845],
  ["Jerez de la Frontera, Spain", 36.6850, -6.1266],
  ["Dublín, Ireland", 53.3498, -6.2603],
  ["Utrecht, Netherlands", 52.0907, 5.1214],
  ["Copenhagen, Denmark", 55.6761, 12.5683],
  ["Malmö, Sweden", 55.6050, 13.0038],
  ["Askeröd, Sweden", 55.7771, 13.6023],
  ["Stockholm, Sweden", 59.3293, 18.0686],
  ["Rindö, Sweden", 59.4066, 18.4880],
  ["Karlstad, Sweden", 59.3793, 13.5036],
  ["Södra Skoga, Sweden", 59.2600, 14.0833],
  ["Villefranche-sur-Mer, France", 43.7034, 7.3116],
  ["Hyères, France", 43.1203, 6.1286],
  ["Genova, Italy", 44.4056, 8.9463],
  ["Napoli, Italy", 40.8518, 14.2681],
  ["Bari, Italy", 41.1171, 16.8719],
  ["Durrës, Albania", 41.3231, 19.4414],
  ["Berat, Albania", 40.7058, 19.9522],
  ["Gjirokastër, Albania", 40.0758, 20.1383],
  ["Sarandë, Albania", 39.8756, 20.0059],
  ["Vlorë, Albania", 40.4661, 19.4914],
  ["Himarë, Albania", 40.1016, 19.7451],
  ["Tiranë, Albania", 41.3275, 19.8189],
  ["İstanbul, Turkey", 41.0082, 28.9784],
  ["Muscat, Oman", 23.5880, 58.3829],
  ["Nairobi, Kenya", -1.2921, 36.8219],
  ["Ngecha, Kenya", -1.1713, 36.6530],
  ["Narok, Kenya", -1.0781, 35.8600],
  ["Talek Gate, Kenya", -1.4146, 35.0125],
  ["Delhi, India", 28.6139, 77.2090],
  ["Agra, India", 27.1767, 78.0081],
  ["Rishikesh, India", 30.0869, 78.2676],
  ["Tehri Lake, India", 30.3763, 78.4806],
  ["Dharamshala, India", 32.2190, 76.3234],
  ["Dharamkot, India", 32.2427, 76.3215],
  ["Leh, India", 34.1526, 77.5771],
  ["Nubra Valley, India", 34.6390, 77.5386],
  ["Pangong Tso, India", 33.7497, 78.5960],
  ["Chilling Village, India", 34.1610, 77.1560],
  ["Phuket, Thailand", 7.8804, 98.3923],
  ["Ko Phayam, Thailand", 9.7896, 98.4926],
  ["Ko Pha-ngan, Thailand", 9.7319, 100.0133],
  ["Ko Tao, Thailand", 10.0955, 99.84],
  ["Bangkok, Thailand", 13.7563, 100.5018],
  ["Chiang Mai, Thailand", 18.7061, 98.9817],
  ["Pai, Thailand", 19.3619, 98.4390],
  ["Thai–Lao Friendship Bridge", 17.8784, 102.7476],
  ["Pak Beng, Laos", 19.8545, 101.0236],
  ["Luang Prabang, Laos", 19.8850, 102.1417],
  ["Vang Vieng, Laos", 18.9231, 102.4479],
  ["Hanoi, Vietnam", 21.0278, 105.8342],
  ["The Wildernest Farm, Siargao", 9.8489, 126.0465],
  ["Osaka, Japan", 34.6937, 135.5023],
  ["Kyoto, Japan", 35.0116, 135.7681],
  ["Tokyo, Japan", 35.6764, 139.6500],
  ["11 Briar Oak Drive, Weston CT", 41.2109, -73.3807]
];

const markerGroup = L.featureGroup();

locations.forEach(([name, lat, lon]) => {
  const color = randomColor();
  const marker = L.marker([lat, lon], { icon: coloredIcon(color) });
  marker.bindTooltip(name, { className: 'my-tooltip', direction:'top', offset:[0,-10] });
  marker.bindPopup(`<strong>${name}</strong>`);
  marker.addTo(markerGroup);
});

markerGroup.addTo(map);

if (markerGroup.getLayers().length === 1) {
  map.setView(markerGroup.getBounds().getCenter(), 6);
} else {
  map.fitBounds(markerGroup.getBounds(), { padding:[40,40], maxZoom:6 });
}
</script>

</body>
</html>
